{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Flood Risk Analysis Tool","text":"<p>Welcome to the Flood Risk Analysis Tool documentation. This tool is a Python-based application designed to assess flood risk by analyzing flood inundation, flow velocity, and land use data for Baden-W\u00fcrttemberg. It provides insights into potential flood damage and generates a tif file that can easily be viewed in QGIS, a PDF report for easy sharing, and statistics.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Process raster and vector GIS data</li> <li>Perform hydrological analysis</li> <li>Visualize flood risk maps</li> <li>Generate reports and statistics</li> </ul>"},{"location":"#get-started","title":"Get Started","text":"<p>Check out the Getting Started guide to begin!</p>"},{"location":"#get-the-source-code","title":"\ud83d\ude80 Get the Source Code","text":"<p>The Flood Risk Analysis Tool is open-source and available on GitHub. Check out the repository to explore the code, contribute, or report issues.</p> <p>\ud83d\udc49 View on GitHub</p>"},{"location":"codes/","title":"Code Description","text":""},{"location":"codes/#motivation","title":"Motivation","text":"<p>With global warming leading to increased precipitation, many municipalities, especially those with water courses passing through them, are at risk of flooding. If municipalities are not prepared to handle flooding, it can lead to significant damages. This tool was created to help municipalities determine flood risk, so that they can prepare solutions before problems arise.</p>"},{"location":"codes/#goals","title":"Goals","text":"<p>The goals of this tool are to process inundation, flow velocity and land use into a single general flood risk raster, allowing for a simple overview of the areas in a municipality that are at the highest risk of flooding. Programmatically, the goals of this project are to develop a better understanding of Python and how to manage geospatial data.</p>"},{"location":"diagram/","title":"Code Diagram","text":""},{"location":"function_docs/","title":"Documentation of Functions and Custom Classes","text":"<p>This page provides an overview of all functions and custom classes in the tool, discussing their actions, input arguments, and output data types.</p>"},{"location":"function_docs/#1-mainpy","title":"1. <code>main.py</code>","text":""},{"location":"function_docs/#create_summary_tablerisk_data-inundation_data-land_use_data-output_path","title":"<code>create_summary_table(risk_data, inundation_data, land_use_data, output_path)</code>","text":"<p>Generates a statistical summary table based on risk, inundation, and land use data and saves it as a CSV file.</p>"},{"location":"function_docs/#input-arguments","title":"Input Arguments","text":"<ul> <li><code>risk_data</code> (<code>np.ndarray</code>): Flood risk raster data.</li> <li><code>inundation_data</code> (<code>np.ndarray</code>): Inundation raster data.</li> <li><code>land_use_data</code> (<code>np.ndarray</code>): Land use raster data.</li> <li><code>output_path</code> (<code>str</code>): Path to save the CSV file.</li> </ul>"},{"location":"function_docs/#output","title":"Output","text":"<ul> <li>None (CSV file is saved).</li> </ul>"},{"location":"function_docs/#calculate_risk_by_land_userisk_data-land_use_data-no_data_value-output_path","title":"<code>calculate_risk_by_land_use(risk_data, land_use_data, no_data_value, output_path)</code>","text":"<p>Calculates total, average, and count of risk values for each land use category and saves the outcome as a CSV file.</p>"},{"location":"function_docs/#input-arguments_1","title":"Input Arguments","text":"<ul> <li><code>risk_data</code> (<code>np.ndarray</code>): Flood risk raster data.</li> <li><code>land_use_data</code> (<code>np.ndarray</code>): Land use raster data.</li> <li><code>no_data_value</code> (<code>float</code>): No-data pixel value.</li> <li><code>output_path</code> (<code>str</code>): Path to save the CSV file.</li> </ul>"},{"location":"function_docs/#output_1","title":"Output","text":"<ul> <li>None (CSV file is saved).</li> </ul>"},{"location":"function_docs/#main","title":"<code>main()</code>","text":"<p>Executes the flood risk analysis workflow by collecting user inputs, processing raster data, computing risk, and generating outputs.</p>"},{"location":"function_docs/#input-arguments_2","title":"Input Arguments","text":"<ul> <li>None (User inputs are collected via GUI).</li> </ul>"},{"location":"function_docs/#output_2","title":"Output","text":"<ul> <li>None (Generates output files: GeoTIFF, CSV, and optional PDF).</li> </ul>"},{"location":"function_docs/#2-guipy","title":"2. <code>gui.py</code>","text":""},{"location":"function_docs/#launch_gui","title":"<code>launch_gui()</code>","text":"<p>Launches a GUI to collect user inputs and returns a dictionary of parameters defined by users.</p>"},{"location":"function_docs/#input-arguments_3","title":"Input Arguments","text":"<ul> <li>None.</li> </ul>"},{"location":"function_docs/#output_3","title":"Output","text":"<ul> <li><code>dict</code>: A dictionary holding user-defined parameters such as return period, file paths, and output settings.</li> </ul>"},{"location":"function_docs/#3-rasterpy","title":"3. <code>raster.py</code>","text":""},{"location":"function_docs/#raster-class","title":"<code>Raster</code> Class","text":"<p>A class for handling raster datasets, as well as loading, resampling, and saving.</p>"},{"location":"function_docs/#methods","title":"Methods","text":""},{"location":"function_docs/#__init__self-file_pathnone","title":"<code>__init__(self, file_path=None)</code>","text":"<p>Initializes a <code>Raster</code> object and loads a raster if a file path is provided.</p> <ul> <li><code>file_path</code> (<code>str</code> or <code>None</code>): Path to the raster file.</li> </ul>"},{"location":"function_docs/#resample_rasterself-raster2_path","title":"<code>resample_raster(self, raster2_path)</code>","text":"<p>Resamples another raster to match the current raster\u2019s resolution and CRS.</p> <ul> <li><code>raster2_path</code> (<code>str</code>): Path to the raster file to be resampled.</li> <li>Returns: <code>np.ndarray</code> containing resampled raster data.</li> </ul>"},{"location":"function_docs/#save_rasterself-output_path-data-no_data_valuenone","title":"<code>save_raster(self, output_path, data, no_data_value=None)</code>","text":"<p>Saves a raster to a new file.</p> <ul> <li><code>output_path</code> (<code>str</code>): Path where the raster will be saved.</li> <li><code>data</code> (<code>np.ndarray</code>): Raster data to save.</li> <li><code>no_data_value</code> (<code>float</code> or <code>None</code>): No-data value for metadata.</li> </ul>"},{"location":"function_docs/#4-pdfdocumentpy","title":"4. <code>pdfdocument.py</code>","text":""},{"location":"function_docs/#pdfdocument-class","title":"<code>PDFDocument</code> Class","text":"<p>A class for generating PDF reports with flood risk maps and descriptions.</p>"},{"location":"function_docs/#methods_1","title":"Methods","text":""},{"location":"function_docs/#__init__self-file_path-titledocument-authorauthor","title":"<code>__init__(self, file_path, title=\"Document\", author=\"Author\")</code>","text":"<p>Initializes a <code>PDFDocument</code> object.</p> <ul> <li><code>file_path</code> (<code>str</code>): Output file path for the created PDF.</li> <li><code>title</code> (<code>str</code>): Title of the document.</li> <li><code>author</code> (<code>str</code>): Author of the document.</li> </ul>"},{"location":"function_docs/#add_titleself","title":"<code>add_title(self)</code>","text":"<p>Adds a title to the PDF.</p>"},{"location":"function_docs/#add_imageself-raster_path-output_dir","title":"<code>add_image(self, raster_path, output_dir)</code>","text":"<p>Adds a flood risk raster image overlaid on OpenStreetMap to the PDF.</p> <ul> <li><code>raster_path</code> (<code>str</code>): Path to the raster file.</li> <li><code>output_dir</code> (<code>str</code>): Directory for saving the temporary image.</li> </ul>"},{"location":"function_docs/#add_boundsself-bounds","title":"<code>add_bounds(self, bounds)</code>","text":"<p>Adds bounding box information as text to the PDF.</p> <ul> <li><code>bounds</code> (<code>tuple</code>): Raster bounding box <code>(min_x, min_y, max_x, max_y)</code>.</li> </ul>"},{"location":"function_docs/#saveself","title":"<code>save(self)</code>","text":"<p>Saves the PDF and removes temporary image files.</p>"},{"location":"function_docs/#generate_from_rasterself-raster_path-output_dir","title":"<code>generate_from_raster(self, raster_path, output_dir)</code>","text":"<p>Generates a complete PDF report from a raster.</p> <ul> <li><code>raster_path</code> (<code>str</code>): Path to the raster output file.</li> <li><code>output_dir</code> (<code>str</code>): Directory for saving output files.</li> </ul>"},{"location":"requirements/","title":"Requirements","text":"<p>These are the required packages to run the tool. The following list was compiled with pipreqs</p> <ul> <li>contextily==1.6.2</li> <li>matplotlib==3.8.4</li> <li>numpy~=1.26.4</li> <li>pandas==2.2.3</li> <li>Pillow~=10.4.0</li> <li>rasterio~=1.4.3</li> <li>scikit-image~=0.23.2</li> <li>reportlab~=4.2.5</li> </ul>"},{"location":"usage/","title":"Inundation Rasters","text":""},{"location":"usage/#creating-your-own-inundation-raster","title":"Creating Your Own Inundation Raster","text":"<p>To run the Flood Risk Analysis tool, sample inundation and flow velocity rasters for two different locations are provided within the /data/ folder that can be used with the tool. If you wish to generate your own inundation GeoTIFF, the following section provides information on how to do so. You will need QGIS.</p> <p>The first step is to download the inundation shapefiles provided by the LUBW, and open them in QGIS. To keep our project size small, we have not included these files in the repository. To download them, first go to https://udo.lubw.baden-wuerttemberg.de/public/ and with the panel on the left, open Wasser -&gt; Hochwasser -&gt; Hochwassergefahrenkarten. Click the second option to download the zip file (size ~250Mb). The downloaded file should be named HWGK_UF. This zip file contains  inundation zones for 10, 50, 100 and extreme return periods.</p> <p>Now, open QGIS and go to Layer -&gt; Add Layer -&gt; Add Vector Layer. Select the zip file that you downloaded earlier, and click Add. A pop-up will ask you which of the layers you wish to add. In this example, we will only add the UF_HQ100 layer, which corresponds to a 100-year return period flood.</p> <p>You should now have the UF_HQ100 map added to QGIS. Drag the OpenStreetMap XYZ tile into the window to also add a basemap to the window. Now, navigate to the area  for which you would like to create a flood risk summary. In this example, the city of T\u00fcbingen will be used.</p> <p></p> <p>Now, we want to create a new temporary scratch layer and draw a polygon around our area of study. Select Layer -&gt; Create Layer -&gt; New Temporary Scratch Layer. Select Polygon for the geometry type and set the CRS to EPSG:25832 (the same CRS as the UF_HQ100). No field data needs to be entered. Now select Add Polygon Feature and draw a rectangle around your area of study, and right click to complete it. After drawing the polygon shape, be sure to save the layer edits and toggle editing off. You should now have something like this:</p> <p></p> <p>In the Processing Toolbox on the right side, search \"Clip vector by mask\". Set the input layer as UF_HQ100, and the mask layer as the temporary scratch layer. Both should be on the same CRS of EPSG:25832. Click \"Run\" and a new, clipped vector layer will appear.</p> <p></p> <p>The next step is to export the clipped layer, so that we can reproject it to EPSG 3857. In the Layers box in the bottom left, right-click on the clipped layer that we just made, and select Export &gt; Save Features As. Be sure to set the CRS to EPSG 3857. Name the file and layer as you'd like. After exporting the layer, it will open automatically in your project.</p> <p></p> <p>Finally, we need to turn the reprojected vector layer into a raster image so that it can be used by the flood risk analysis tool. Select Raster -&gt; Conversion -&gt; Rasterize (Vector to Raster). In the dialog box, select the reprojected vector layer as the input layer. It should have a CRS of EPSG 3857. Under the \"A fixed value to burn\" field, enter \"1\". The \"Output raster size units\" should be \"Georeferenced units\". The \"Width/Horizontal Resolution\" and \"Height/Vertical Resolution\" should be an integer between 10 and 20. The higher the value, the coarser the raster image will be. Important: set the \"Output extent\" by clicking on the dropdown arrow -&gt; Calculate from layer -&gt; Select the reproject vector layer (EPSG 3857). Now click Run.</p> <p></p> <p>You will now have a rasterized flood layer in the Layers panel. Export this layer by right-clicking on it -&gt; Export -&gt; Save As. Name the file as you'd like. No changes are needed to the rest of the options. You have now created an inundation raster image for your area of study for a given return period, that can be used by the flood risk analysis tool. Now, you can run the tool and test out your flood raster image.</p>"}]}